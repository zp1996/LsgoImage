"use strict";function getMatrix(a,r,t){for(var o={},n=0,f=1.5,h=2*Math.pow(f,2),i=Math.PI*h,s=0;s<t;s++){a[s]=[];for(var v=Math.abs(r-s),e=0;e<t;e++){var M=Math.abs(r-e),u=v+M;a[s][e]=u in o?o[u]:o[u]=Math.exp(-(Math.pow(v,2)+Math.pow(M,2))/h)/i,n+=a[s][e]}}for(var s=0;s<t;s++)for(var e=0;e<t;e++)a[s][e]/=n}function GaosiBulr(a,r,t){function o(a,r){for(var t=0,o=0,n=0,f=0,h=a.length;f<h;f++)for(var i=0;i<h;i++)t+=a[f][i]*r[f][i][0],o+=a[f][i]*r[f][i][1],n+=a[f][i]*r[f][i][2];return[0|t,0|o,0|n]}function n(a,o,n,f,h){for(var i,s,v,f=2*n+1,e=[],M=a-n,u=o-n,c=0;c<f;c++){e[c]=[];for(var l=0;l<f;l++)e[c][l]=[],s=c+M,v=l+u,s=s>=r?a:Math.abs(s),v=v>=t?o:Math.abs(v),i=4*s+4*v*r,e[c][l][0]=h[i],e[c][l][1]=h[i+1],e[c][l][2]=h[i+2]}return e}var f,h,i,s=3,v=2*s+1,e=[];getMatrix(e,s,v);for(var M=0;M<t;M++){f=M*r*4;for(var u=0;u<r;u++)h=f+4*u,i=o(e,n.call(null,u,M,s,v,a)),a[h]=i[0],a[h+1]=i[1],a[h+2]=i[2]}}onmessage=function(a){var r=a.data;GaosiBulr(r.arr,r.width,r.height),postMessage(r.arr)};